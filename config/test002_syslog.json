{
	"config" : {
		"datadir" : "/tmp/nsyslog",
		"wmdir" : "/tmp/wms",
		"input" : {"buffer" : 1000},
		"process" : {"buffer": 1000}
	},

	"inputs" : {
		"file" : {
			"type" : "file",
			"config" : {
				"path" : "/var/log/**/*.log",
				"watch" : true,
				"readmode" : "offset",
				"offset" : "start"
			}
		},
		"syslog" : {
			"type" : "syslog",
			"config" : {
				"url" : "tcp://localhost:1514",
				"tls" : {
					"key" : "./config/server.key",
					"cert" : "./config/server.crt"
				}
			}
		}
	},

	"processors" : {
		"timestamp" : {
			"type" : "timestamp",
			"config" : {}
		},
		"props" : {
			"type" : "properties",
			"config" : {
				"set" : {
					"otherfield" : "${timestamp} => ${originalMessage}"
				}
			}
		}
	},

	"transporters" : {
		"syslog" : {
			"type" : "syslog",
			"config" : {
				"url" : "udp://localhost:514",
				"format" : "${originalMessage}",
				"application" : "${filename}",
				"hostname" : "localhost",
				"level" : "info",
				"facility" : 5,
				"stream" : true,
				"tls" : {
					"key" : "./config/server.key",
					"cert" : "./config/server.crt"
				}
			}
		},
		"logger" : {
			"type" : "console",
			"config" : {
				"format" : "${JSON}"
			}
		},
		"null" : {
			"type" : "null"
		}
	},

	"flows" : [
		{"from":"${input}=='file'", "processors":["timestamp","props"], "transporters":["syslog","logger"], "mode":"parallel"}
	]
}
