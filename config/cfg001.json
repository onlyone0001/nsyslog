{
	"include" : [
		"processors.json"
	],
	"servers" : {
		"udp" : {
			"protocol" : "udp4",
			"interface" : "0.0.0.0",
			"port" : "514"
		}
	},

	"filters" : {
		"fromUDP" : "${server.protocol}=='udp4'",
		"httpOk" : "${message}.match(/ 200/)",
		"httpRed" : "${message}.match(/ 302/)",
		"httpErr" : "${message}.match(/ (404|500)/)"
	},

	"filterGroups" : {
	},

	"transporters" : {
		"file1" : {
			"type" : "file",
			"config" : {
				"format" : "${originalMessage}",
				"path" : "/var/log/nsyslog/${host}/${appName}.log"
			}
		},
		"file2" : {
			"type" : "file",
			"config" : {
				"format" : "${ts} ${message}",
				"path" : "/var/log/nsyslog/${host}/${appName}_${prival}.log"
			}
		},
		"log" : {
			"type" : "console",
			"config" : {"format" : "${message}", "level" : "log"}
		},
		"debug" : {
			"type" : "console",
			"config" : {"format" : "${message}", "level" : "debug"}
		},
		"warn" : {
			"type" : "console",
			"config" : {"format" : "${message}", "level" : "warn"}
		},
		"error" : {
			"type" : "console",
			"config" : {"format" : "${message}", "level" : "error"}
		}
	},

	"transporterGroups" : {
		"files" : {"mode":"parallel", "transporters":["file1","file2"]}
	},

	"processors" : {
	},

	"flows" : [
		{"from":["httpOk"], "transporters":"log", "mode":"serial"},
		{"from":["httpRed"], "transporters":"warn", "mode":"parallel"},
		{"from":["httpErr"], "transporters":"error", "mode":"serial"},
		{"from":"*", "transporters":["debug","$files"]}
	]
}
